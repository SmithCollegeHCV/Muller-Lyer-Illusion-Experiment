<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Muller-Lyer Illusion</title>
    <link href="../css/prime.css" rel="stylesheet">
  </head>

  <body>
    <div id="enter" class="enter">
        <h2 style="text-align: center" > Welcome to <br />Muller-Layer Illusion</h2>
        <div style="margin-top: 10px; margin-left: 15px; margin-right: 10px"> Instruction: In this test, we will give you a number, 4 range sliders for which you will slide to a certain point that you think matches the given number. Only one range slider will appear each time, and you have 10 seconds to slide.</div>
        <button type="button" id="getin" class="button0" onclick="showupFunction()" style="display:initial; ">Enter The Test</button>
    </div>

    <header>
      <h1 style="text-align:center;">Muller-Layer Illusion Experiment</h1>
    </header> 
      
    <div id='ex_pic_container' class='ex_pic_container'>
        <div class='tags'>
            <div class="subtag" id='ml1_tag' style='margin-left: 0px; background-color: red'>1</div>
            <div class="subtag" id='ml2_tag'>2</div>
            <div class="subtag" id='ml3_tag'>3</div>
            <div class="subtag" id='ml4_tag'>4</div>
            <div class="subtag" id='ml5_tag'>5</div>
            <div class="subtag" id='ml6_tag'>6</div>
        </div>

<!--
<p class="countdown"> You have <span id="countdowntimer">10 </span> seconds to answer.</p> -->
    <div class="pic_overall_container">
    <div class = 'pic_container' id='ml1' style="visibility:visible;">
        <div id='sl1'> 
            <div id="infoi">
              <img id='img1' src="../image/ml-1.png"/>
            </div>
            <div id="slider">
              <input type="range" id='s1' name="points" min="0" max="100" class="myslider" value="0">
            </div>
        </div>
    </div>

    <div class = 'pic_container' id='ml2' style="visibility:hidden;"> 
        <div id='sl2'> 
            <div id ="infoi2">
              <img src="../image/ml-2.png"/>
            </div>
            <div id="slider2">
              <input type="range" id='s2' name="points" min="0" max="100" class="myslider" value="0">
            </div>
        </div>
    </div>

    <div class = 'pic_container' id='ml3' style="visibility:hidden;"> 
        <div id='sl3'> 
            <div id="infoi3">
              <img src="../image/ml-3.png"/>
            </div>
            <div id="slider3">
              <input type="range" id='s3' name="points" min="0" max="100" class="myslider" value="0">
            </div>
        </div>
    </div>
    <div class = 'pic_container' id='ml4' style="visibility:hidden;"> 
        <div id='sl4'> 
            <div id="infoi4">
              <img src="../image/ml-4.png"/>
            </div>
            <div id="slider4">
              <input type="range" id='s4' name="points" min="0" max="100" class="myslider" value="0">
            </div>
        </div>
    </div>
    <div class = 'pic_container' id='ml5' style="visibility:hidden;"> 
        <div id='sl5'> 
            <div id="infoi5">
              <img src="../image/ml-5.png"/>
            </div>
            <div id="slider5">
              <input type="range" id='s5' name="points" min="0" max="100" class="myslider" value="0">
            </div>
        </div>
    </div>
    <div class = 'pic_container' id='ml6' style="visibility:hidden;"> 
        <div id='sl6'> 
            <div id="infoi6">
              <img src="../image/ml-6.png"/>
            </div>
            <div id="slider6">
              <input type="range" id='s6' name="points" min="0" max="100" class="myslider" value="0">
            </div>
        </div>
    </div>
    </div>
</div>

      
      

    <div id='timer' class="timer">    
        <p class="countdown"> You have <span id="countdowntimer">10 </span> seconds to answer.</p> 
        <div id="useless"></div>
    </div> 
        
        
        
        
        
        <script>          
            function showupFunction(){
                document.getElementById("enter").style.visibility = "hidden";
                (function loop(i){
                    setTimeout(function(){
                        CountdownTimer(i);
                        if (i++ <= 5){
                            loop(i);
                        }
                    }, 10000);
                })(1);

                setTimeout(function(){
                final.push([values1[0],values1[values1.length-1]])
                final.push([values2[0],values2[values2.length-1]])
                final.push([values3[0],values3[values3.length-1]])
                final.push([values4[0],values4[values4.length-1]])
                final.push([values5[0],values5[values5.length-1]])
                final.push([values6[0],values6[values6.length-1]])
                // Building the CSV from the Data two-dimensional array
                // Each column is separated by ";" and new line "\n" for next row
                var csvContent = '';
                final.forEach(function(infoArray, index) {
                  dataString = infoArray.join(';');
                  csvContent += index < final.length ? dataString + '\n' : dataString;
                });

                // The download function takes a CSV string, the filename and mimeType as parameters
                // Scroll/look down at the bottom of this snippet to see how download is called
                var download = function(content, fileName, mimeType) {
                  var a = document.createElement('a');
                  mimeType = mimeType || 'application/octet-stream';

                  if (navigator.msSaveBlob) { // IE10
                    navigator.msSaveBlob(new Blob([content], {
                      type: mimeType
                    }), fileName);
                  } else if (URL && 'download' in a) { //html5 A[download]
                    a.href = URL.createObjectURL(new Blob([content], {
                      type: mimeType
                    }));
                    a.setAttribute('download', fileName);
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                  } else {
                    location.href = 'data:application/octet-stream,' + encodeURIComponent(content); // only this mime type is supported
                  }
                }
                download(csvContent, 'dowload.csv', 'text/csv;encoding:utf-8');},70000);

            }
            
            
            var containers=["useless","ml1","ml2","ml3","ml4","ml5","ml6"];
            var containers2=["useless",'ml1_tag','ml2_tag','ml3_tag','ml4_tag','ml5_tag','ml6_tag']
            function CountdownTimer(i){
                var timeleft = 10;
                var Timer = setInterval(function(){
                    timeleft--;
                    document.getElementById("countdowntimer").textContent = timeleft;
                    if(timeleft < 0)
                    clearInterval(Timer);
                },1000)
                
                
                if (i <= 6){
                    document.getElementById(containers[i-1]).style.visibility="hidden";
                    document.getElementById(containers[i]).style.visibility="visible";
                    document.getElementById(containers2[i]).style.backgroundColor='red';
                    document.getElementById(containers2[i-1]).style.backgroundColor='beige';
                } else {
                    document.getElementById(containers[i]).style.visibility="hidden";
                    return;
                }
                
            }
            var values1=[]
            var values2=[]
            var values3=[]
            var values4=[]
            var values5=[]
            var values6=[]
            var final=[]

            function getValue(idname,arrayname) {
                var val = document.getElementById(idname).value
                arrayname.push(idname)
                arrayname.push(val)
            }

            document.getElementById("s1").oninput = function() {
                getValue("s1",values1)
            };
            document.getElementById("s2").oninput = function() {
                getValue("s2",values2)
            };
            document.getElementById("s3").oninput = function() {
                getValue("s3",values3)
            };
            document.getElementById("s4").oninput = function() {
                getValue("s4",values4)
            };
            document.getElementById("s5").oninput = function() {
                getValue("s5",values5)
            };
            document.getElementById("s6").oninput = function() {
                getValue("s6",values6)
            };

            

        </script>
   



      
    </body>
</html>